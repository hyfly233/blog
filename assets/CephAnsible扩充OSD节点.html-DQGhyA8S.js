import{_ as n,c as a,f as e,o as l}from"./app-chPKMbRn.js";const i={};function p(c,s){return l(),a("div",null,s[0]||(s[0]=[e(`<h1 id="ceph-ansible扩充osd节点" tabindex="-1"><a class="header-anchor" href="#ceph-ansible扩充osd节点"><span>Ceph-Ansible扩充osd节点</span></a></h1><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://access.redhat.com/documentation/zh-cn/red_hat_ceph_storage/4/html/operations_guide/ceph-osds-ops" target="_blank" rel="noopener noreferrer">https://access.redhat.com/documentation/zh-cn/red_hat_ceph_storage/4/html/operations_guide/ceph-osds-ops</a></li><li><a href="https://www.cnblogs.com/lvzhenjiang/p/14908195.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/lvzhenjiang/p/14908195.html</a></li></ul><h2 id="扩充-osd-节点" tabindex="-1"><a class="header-anchor" href="#扩充-osd-节点"><span>扩充 osd 节点</span></a></h2><h3 id="激活虚拟环境" tabindex="-1"><a class="header-anchor" href="#激活虚拟环境"><span>激活虚拟环境</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1 激活虚拟环境</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">source</span><span style="color:#A3BE8C;"> /opt/venv/ceph/bin/activate</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">source</span><span style="color:#A3BE8C;"> /opt/venv/ceph-2/bin/activate</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编辑-osds-yml" tabindex="-1"><a class="header-anchor" href="#编辑-osds-yml"><span>编辑 osds.yml</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /opt/ceph/ceph-ansible/group_vars/osds.yml</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># 添加内容</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">devices:</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  -</span><span style="color:#A3BE8C;"> /dev/sdc</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  -</span><span style="color:#A3BE8C;"> /dev/sdd</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  -</span><span style="color:#A3BE8C;"> /dev/sde</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#A3BE8C;"> /opt/ceph/ceph-ansible</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">ansible</span><span style="color:#A3BE8C;"> -i</span><span style="color:#A3BE8C;"> hosts</span><span style="color:#A3BE8C;"> all</span><span style="color:#A3BE8C;"> -m</span><span style="color:#A3BE8C;"> ping</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">ansible-playbook</span><span style="color:#A3BE8C;"> -i</span><span style="color:#A3BE8C;"> hosts</span><span style="color:#A3BE8C;"> infrastructure-playbooks/add-osd.yml</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> ansible_python_interpreter=/usr/bin/python2</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> container_package_name=docker-ce</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> container_service_name=docker-ce</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> container_binding_name=python-docker-py</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-v</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="添加-osd-节点的硬盘" tabindex="-1"><a class="header-anchor" href="#添加-osd-节点的硬盘"><span>添加 osd 节点的硬盘</span></a></h2><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># 查看硬盘类型</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">lsblk</span><span style="color:#A3BE8C;"> -d</span><span style="color:#A3BE8C;"> -o</span><span style="color:#A3BE8C;"> name,rota</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">NAME</span><span style="color:#A3BE8C;"> ROTA</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sda</span><span style="color:#B48EAD;">     0</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sdb</span><span style="color:#B48EAD;">     0</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sdc</span><span style="color:#B48EAD;">     0</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sdd</span><span style="color:#B48EAD;">     0</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sde</span><span style="color:#B48EAD;">     1</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编辑-osds-yml-1" tabindex="-1"><a class="header-anchor" href="#编辑-osds-yml-1"><span>编辑 osds.yml</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /opt/ceph/ceph-ansible/group_vars/osds.yml</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># 添加内容</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">devices:</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  -</span><span style="color:#A3BE8C;"> /dev/sdc</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  -</span><span style="color:#A3BE8C;"> /dev/sdd</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">lvm_volumes:</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  -</span><span style="color:#A3BE8C;"> data:</span><span style="color:#A3BE8C;"> /dev/sde</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="部署-1" tabindex="-1"><a class="header-anchor" href="#部署-1"><span>部署</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#A3BE8C;"> /opt/ceph/ceph-ansible</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2 验证连通性</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">ansible</span><span style="color:#A3BE8C;"> -i</span><span style="color:#A3BE8C;"> hosts</span><span style="color:#A3BE8C;"> all</span><span style="color:#A3BE8C;"> -m</span><span style="color:#A3BE8C;"> ping</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">ansible-playbook</span><span style="color:#A3BE8C;"> -i</span><span style="color:#A3BE8C;"> hosts</span><span style="color:#A3BE8C;"> site-container.yml</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> ansible_python_interpreter=/usr/bin/python2</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> container_package_name=docker-ce</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> container_service_name=docker-ce</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-e</span><span style="color:#A3BE8C;"> container_binding_name=python-docker-py</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">	-vvv</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16)]))}const r=n(i,[["render",p],["__file","CephAnsible扩充OSD节点.html.vue"]]),o=JSON.parse('{"path":"/md/article/storage/CephAnsible%E6%89%A9%E5%85%85OSD%E8%8A%82%E7%82%B9.html","title":"CephAnsible扩充OSD节点","lang":"en-US","frontmatter":{"title":"CephAnsible扩充OSD节点","sidebar":"heading"},"headers":[{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]},{"level":2,"title":"扩充 osd 节点","slug":"扩充-osd-节点","link":"#扩充-osd-节点","children":[{"level":3,"title":"激活虚拟环境","slug":"激活虚拟环境","link":"#激活虚拟环境","children":[]},{"level":3,"title":"编辑 osds.yml","slug":"编辑-osds-yml","link":"#编辑-osds-yml","children":[]},{"level":3,"title":"部署","slug":"部署","link":"#部署","children":[]}]},{"level":2,"title":"添加 osd 节点的硬盘","slug":"添加-osd-节点的硬盘","link":"#添加-osd-节点的硬盘","children":[{"level":3,"title":"编辑 osds.yml","slug":"编辑-osds-yml-1","link":"#编辑-osds-yml-1","children":[]},{"level":3,"title":"部署","slug":"部署-1","link":"#部署-1","children":[]}]}],"git":{"updatedTime":1735864944000,"contributors":[{"name":"hyfly233","username":"hyfly233","email":"hyfly233@outlook.com","commits":6,"url":"https://github.com/hyfly233"}]},"filePathRelative":"md/article/storage/CephAnsible扩充OSD节点.md"}');export{r as comp,o as data};
