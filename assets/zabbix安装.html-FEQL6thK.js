import{_ as n,c as a,f as l,o as e}from"./app-chPKMbRn.js";const i={};function p(c,s){return e(),a("div",null,s[0]||(s[0]=[l(`<h1 id="zabbix安装" tabindex="-1"><a class="header-anchor" href="#zabbix安装"><span>Zabbix安装</span></a></h1><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://www.zabbix.com/download?zabbix=5.0&amp;os_distribution=centos&amp;os_version=7&amp;components=server_frontend_agent&amp;db=mysql&amp;ws=apache" target="_blank" rel="noopener noreferrer">官方下载 Zabbix</a></li></ul><h2 id="安装-zabbix-server" tabindex="-1"><a class="header-anchor" href="#安装-zabbix-server"><span>安装 Zabbix Server</span></a></h2><h3 id="关闭-selinux" tabindex="-1"><a class="header-anchor" href="#关闭-selinux"><span>关闭 Selinux</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">setenforce</span><span style="color:#B48EAD;"> 0</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /etc/selinux/config</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2 修改内容</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">SELINUX</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">disabled</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改防火墙策略" tabindex="-1"><a class="header-anchor" href="#修改防火墙策略"><span>修改防火墙策略</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># 关闭防火墙</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> stop</span><span style="color:#A3BE8C;"> firewalld</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> systemctl</span><span style="color:#A3BE8C;"> disable</span><span style="color:#A3BE8C;"> firewalld</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># 或者修改防火墙策略</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">firewall-cmd</span><span style="color:#A3BE8C;"> --zone=public</span><span style="color:#A3BE8C;"> --add-port=10050/tcp</span><span style="color:#A3BE8C;"> --permanent</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">firewall-cmd</span><span style="color:#A3BE8C;"> --zone=public</span><span style="color:#A3BE8C;"> --add-port=10050/udp</span><span style="color:#A3BE8C;"> --permanent</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">firewall-cmd</span><span style="color:#A3BE8C;"> --zone=public</span><span style="color:#A3BE8C;"> --add-port=10051/tcp</span><span style="color:#A3BE8C;"> --permanent</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">firewall-cmd</span><span style="color:#A3BE8C;"> --zone=public</span><span style="color:#A3BE8C;"> --add-port=10051/udp</span><span style="color:#A3BE8C;"> --permanent</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">firewall-cmd</span><span style="color:#A3BE8C;"> --zone=public</span><span style="color:#A3BE8C;"> --add-port=80/tcp</span><span style="color:#A3BE8C;"> --permanent</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> restart</span><span style="color:#A3BE8C;"> firewalld</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="备份" tabindex="-1"><a class="header-anchor" href="#备份"><span>备份</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#A3BE8C;"> /etc/yum.repos.d</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2 备份</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9;"> file</span><span style="color:#81A1C1;"> in</span><span style="color:#A3BE8C;"> *</span><span style="color:#81A1C1;">;</span><span style="color:#81A1C1;"> do</span><span style="color:#88C0D0;"> cp</span><span style="color:#D8DEE9;"> $file</span><span style="color:#81A1C1;"> \${</span><span style="color:#D8DEE9;">file</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">.bak</span><span style="color:#81A1C1;">;</span><span style="color:#81A1C1;"> done</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sudo</span><span style="color:#A3BE8C;"> sed</span><span style="color:#A3BE8C;"> -e</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">s|^mirrorlist=|#mirrorlist=|g</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">         -e</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">         -i.bak</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">         /etc/yum.repos.d/CentOS-</span><span style="color:#81A1C1;">*</span><span style="color:#A3BE8C;">.repo</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.4</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> clean</span><span style="color:#A3BE8C;"> all</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> yum</span><span style="color:#A3BE8C;"> makecache</span><span style="color:#A3BE8C;"> fast</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装-zabbix" tabindex="-1"><a class="header-anchor" href="#安装-zabbix"><span>安装 zabbix</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1 配置 zabbix 源</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">rpm</span><span style="color:#A3BE8C;"> -ivh</span><span style="color:#A3BE8C;"> https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> clean</span><span style="color:#A3BE8C;"> all</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3 安装 zabbix 服务端组件</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> zabbix-server-mysql</span><span style="color:#A3BE8C;"> zabbix-agent</span><span style="color:#A3BE8C;"> -y</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.4 安装 zabbix 前端组件</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> centos-release-scl</span><span style="color:#A3BE8C;"> -y</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.5</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /etc/yum.repos.d/zabbix.repo</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.5 修改内容</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">[</span><span style="color:#D8DEE9FF;">zabbix-frontend</span><span style="color:#ECEFF4;">]</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">...</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">enabled</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">...</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.6 安装 zabbix 前端页面、初始数据库、PHP 及 httpd 组件，可能会出错</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> zabbix-web-mysql-scl</span><span style="color:#A3BE8C;"> zabbix-apache-conf-scl</span><span style="color:#A3BE8C;"> -y</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><h2 id="错误排查" tabindex="-1"><a class="header-anchor" href="#错误排查"><span>错误排查</span></a></h2><h3 id="network-is-unreachable" tabindex="-1"><a class="header-anchor" href="#network-is-unreachable"><span>Network is unreachable</span></a></h3><h4 id="现象" tabindex="-1"><a class="header-anchor" href="#现象"><span>现象</span></a></h4><p>执行 <code>yum install zabbix-web-mysql-scl</code> 出现 <code>Network is unreachable</code><code>Could not retrieve mirrorlist http://mirrorlist.centos.org?arch=x86_64&amp;release=7&amp;repo=sclo-rh error was 14: curl#7 - &quot;Failed to connect to 2a05:d012:8b5:6503:9efb:5cad:348f:e826: Network is unreachable&quot;</code></p><h4 id="解决" tabindex="-1"><a class="header-anchor" href="#解决"><span>解决</span></a></h4><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="配置源"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#A3BE8C;"> /etc/yum.repos.d</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2 备份</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9;"> file</span><span style="color:#81A1C1;"> in</span><span style="color:#A3BE8C;"> ./CentOS-SCLo-scl*</span><span style="color:#81A1C1;">;</span><span style="color:#81A1C1;"> do</span><span style="color:#88C0D0;"> cp</span><span style="color:#D8DEE9;"> $file</span><span style="color:#81A1C1;"> \${</span><span style="color:#D8DEE9;">file</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">.bak</span><span style="color:#81A1C1;">;</span><span style="color:#81A1C1;"> done</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sudo</span><span style="color:#A3BE8C;"> sed</span><span style="color:#A3BE8C;"> -e</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">s|^mirrorlist=|#mirrorlist=|g</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">         -e</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">         -i.bak</span><span style="color:#EBCB8B;"> \\</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">         /etc/yum.repos.d/CentOS-SCLo-scl</span><span style="color:#81A1C1;">*</span><span style="color:#A3BE8C;">.repo</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.4</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> clean</span><span style="color:#A3BE8C;"> all</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> yum</span><span style="color:#A3BE8C;"> makecache</span><span style="color:#A3BE8C;"> fast</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.5</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> zabbix-web-mysql-scl</span><span style="color:#A3BE8C;"> zabbix-apache-conf-scl</span><span style="color:#A3BE8C;"> -y</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="创建数据库" tabindex="-1"><a class="header-anchor" href="#创建数据库"><span>创建数据库</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> mariadb-server</span><span style="color:#A3BE8C;"> -y</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> enable</span><span style="color:#A3BE8C;"> --now</span><span style="color:#A3BE8C;"> mariadb</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">mysql_secure_installation</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.4</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">mysql</span><span style="color:#A3BE8C;"> -u</span><span style="color:#A3BE8C;"> root</span><span style="color:#A3BE8C;"> -p</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">create</span><span style="color:#A3BE8C;"> database</span><span style="color:#A3BE8C;"> zabbix</span><span style="color:#A3BE8C;"> character</span><span style="color:#A3BE8C;"> set</span><span style="color:#A3BE8C;"> utf8</span><span style="color:#A3BE8C;"> collate</span><span style="color:#A3BE8C;"> utf8_bin</span><span style="color:#81A1C1;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">create</span><span style="color:#A3BE8C;"> user</span><span style="color:#A3BE8C;"> zabbix@localhost</span><span style="color:#A3BE8C;"> identified</span><span style="color:#A3BE8C;"> by</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">password@123</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#81A1C1;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">grant</span><span style="color:#A3BE8C;"> all</span><span style="color:#A3BE8C;"> privileges</span><span style="color:#A3BE8C;"> on</span><span style="color:#A3BE8C;"> zabbix.</span><span style="color:#81A1C1;">*</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> zabbix@localhost</span><span style="color:#81A1C1;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">quit</span><span style="color:#81A1C1;">;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.5</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">zcat</span><span style="color:#A3BE8C;"> /usr/share/doc/zabbix-server-mysql</span><span style="color:#81A1C1;">*</span><span style="color:#A3BE8C;">/create.sql.gz</span><span style="color:#81A1C1;"> |</span><span style="color:#88C0D0;"> mysql</span><span style="color:#A3BE8C;"> -u</span><span style="color:#A3BE8C;"> zabbix</span><span style="color:#A3BE8C;"> -p</span><span style="color:#A3BE8C;"> zabbix</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.6</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /etc/zabbix/zabbix_server.conf</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.6 修改内容</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">DBPassword</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">password@123</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.7 配置时区</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.7 修改内容</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">php_value[date.timezone]</span><span style="color:#A3BE8C;"> =</span><span style="color:#A3BE8C;"> Asia/Shanghai</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.8 配置字体，避免前台监控图形中文乱码</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> -y</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> wqy-microhei-fonts</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.8 修改内容</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cp</span><span style="color:#A3BE8C;"> /usr/share/fonts/wqy-microhei/wqy-microhei.ttc</span><span style="color:#A3BE8C;"> /usr/share/fonts/dejavu/DejaVuSans.ttf</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动-zabbix" tabindex="-1"><a class="header-anchor" href="#启动-zabbix"><span>启动 zabbix</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> restart</span><span style="color:#A3BE8C;"> zabbix-server</span><span style="color:#A3BE8C;"> zabbix-agent</span><span style="color:#A3BE8C;"> httpd</span><span style="color:#A3BE8C;"> rh-php72-php-fpm</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> enable</span><span style="color:#A3BE8C;"> zabbix-server</span><span style="color:#A3BE8C;"> zabbix-agent</span><span style="color:#A3BE8C;"> httpd</span><span style="color:#A3BE8C;"> rh-php72-php-fpm</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3 查看 zabbix server 日志</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cat</span><span style="color:#A3BE8C;"> /var/log/zabbix/zabbix_server.log</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器访问 http://xxxx/zabbix ，账号密码 Admin/zabbix</p><h2 id="安装-zabbix-agent" tabindex="-1"><a class="header-anchor" href="#安装-zabbix-agent"><span>安装 Zabbix Agent</span></a></h2><p>在 Zabbix web 页面点击 Configuration -&gt; Hosts -&gt; Create host 添加主机</p><h3 id="安装-zabbix-agent-1" tabindex="-1"><a class="header-anchor" href="#安装-zabbix-agent-1"><span>安装 zabbix agent</span></a></h3><h4 id="被动模式" tabindex="-1"><a class="header-anchor" href="#被动模式"><span>被动模式</span></a></h4><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#616E88;"># step.1 配置 zabbix 源</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">rpm</span><span style="color:#A3BE8C;"> -ivh</span><span style="color:#A3BE8C;"> https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.2</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> clean</span><span style="color:#A3BE8C;"> all</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.3 安装</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">yum</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> zabbix-agent</span><span style="color:#A3BE8C;"> -y</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.4</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">vim</span><span style="color:#A3BE8C;"> /etc/zabbix/zabbix_agentd.conf</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.4 修改内容</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">StartAgents</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">0</span><span style="color:#616E88;">               # 可选，开启主动推送</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">Server</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">192.168.1.129</span><span style="color:#616E88;">        # zabbix server 地址</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">ServerActive</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">192.168.1.129</span><span style="color:#616E88;">  # zabbix server 地址</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9;">Hostname</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">192.168.1.130</span><span style="color:#616E88;">      # 本机主机名，与 zabbix web 中配置一样</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.5 启动</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> restart</span><span style="color:#A3BE8C;"> zabbix-agent.service</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> systemctl</span><span style="color:#A3BE8C;"> enable</span><span style="color:#A3BE8C;"> zabbix-agent.service</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.6</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">systemctl</span><span style="color:#A3BE8C;"> status</span><span style="color:#A3BE8C;"> zabbix-agent.service</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#616E88;"># step.7 查看 zabbix server 日志</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cat</span><span style="color:#A3BE8C;"> /var/log/zabbix/zabbix_agentd.log</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-部署" tabindex="-1"><a class="header-anchor" href="#docker-部署"><span>Docker 部署</span></a></h2><h3 id="docker-compose-yaml" tabindex="-1"><a class="header-anchor" href="#docker-compose-yaml"><span>docker-compose.yaml</span></a></h3><div class="language-yaml line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-yaml;"><code><span class="line"><span class="line"><span style="color:#8FBCBB;">version</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">3</span><span style="color:#ECEFF4;">&#39;</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">networks</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">  zbx_net</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    driver</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> bridge</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">services</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">  zabbix-mysql</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    image</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> mysql:8.0.23</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    container_name</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix-mysql</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    restart</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> always</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    command</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> mysqld</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> --default-authentication-plugin=mysql_native_password</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> --character-set-server=utf8</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> --collation-server=utf8_bin</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    environment</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_DATABASE=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_USER=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_PASSWORD=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_ROOT_PASSWORD=biitt@123</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    ports</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> 13306:3306</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    volumes</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./db/data:/var/lib/mysql</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./db/logs:/logs</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    networks</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zbx_net</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">  zabbix-server</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    image</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix/zabbix-server-mysql:centos-5.2-latest</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    container_name</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix-server</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    restart</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> always</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    environment</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> DB_SERVER_HOST=zabbix-mysql</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_DATABASE=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_USER=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_PASSWORD=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_ROOT_PASSWORD=biitt@123</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_JAVAGATEWAY=zabbix-java-gateway</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_JAVAGATEWAY_ENABLE=true</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_JAVAGATEWAYPORT=10052</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_IPMIPOLLERS=3</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    ports</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> 10051:10051</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    volumes</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./server/conf.d:/etc/zabbix/zabbix_server.conf.d</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./server/logs:/logs</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    depends_on</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zabbix-mysql</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    networks</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zbx_net</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">  </span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">  zabbix-web-nginx</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    image</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix/zabbix-web-nginx-mysql:centos-5.2-latest</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    container_name</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix-web-nginx</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    restart</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> always</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    environment</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> DB_SERVER_HOST=zabbix-mysql</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_DATABASE=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_USER=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_PASSWORD=zabbix</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> MYSQL_ROOT_PASSWORD=biitt@123</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_SERVER_HOST=zabbix-server</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    ports</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> 18080:8080</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    volumes</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./web/conf.d:/etc/zabbix/web/conf.d</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./web/logs:/logs</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ./web/DejaVuSans.ttf:/usr/share/zabbix/assets/fonts/DejaVuSans.ttf</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    depends_on</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zabbix-server</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zabbix-mysql</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    networks</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zbx_net</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">  </span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">  zabbix-java-gateway</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    image</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix/zabbix-java-gateway:centos-5.2-latest</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    container_name</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix-java-gateway</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    restart</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> always</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    networks</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zbx_net</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">  </span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">  zabbix-agent</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    image</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix/zabbix-agent:centos-5.2-latest</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    container_name</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> zabbix-agent</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    restart</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> always</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    ports</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> 10050:10050</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    environment</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_HOSTNAME=Zabbix server</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_SERVER_HOST=zabbix-server</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> ZBX_SERVER_PORT=10051</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    depends_on</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zabbix-server</span></span></span>
<span class="line"><span class="line"><span style="color:#8FBCBB;">    networks</span><span style="color:#ECEFF4;">:</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">      -</span><span style="color:#A3BE8C;"> zbx_net</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#A3BE8C;"> /opt/docker/zabbix/web</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">wget</span><span style="color:#A3BE8C;"> https://dl.cactifans.com/zabbix_docker/msty.ttf</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">mv</span><span style="color:#A3BE8C;"> msty.ttf</span><span style="color:#A3BE8C;"> DejaVuSans.ttf</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">cd</span><span style="color:#A3BE8C;"> /opt/docker/zabbix</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">docker-compose</span><span style="color:#A3BE8C;"> up</span><span style="color:#A3BE8C;"> -d</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,28)]))}const o=n(i,[["render",p],["__file","zabbix安装.html.vue"]]),d=JSON.parse('{"path":"/md/article/monitor/zabbix/zabbix%E5%AE%89%E8%A3%85.html","title":"Zabbix安装","lang":"en-US","frontmatter":{"title":"Zabbix安装","sidebar":"heading"},"headers":[{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]},{"level":2,"title":"安装 Zabbix Server","slug":"安装-zabbix-server","link":"#安装-zabbix-server","children":[{"level":3,"title":"关闭 Selinux","slug":"关闭-selinux","link":"#关闭-selinux","children":[]},{"level":3,"title":"修改防火墙策略","slug":"修改防火墙策略","link":"#修改防火墙策略","children":[]},{"level":3,"title":"备份","slug":"备份","link":"#备份","children":[]},{"level":3,"title":"安装 zabbix","slug":"安装-zabbix","link":"#安装-zabbix","children":[]},{"level":3,"title":"创建数据库","slug":"创建数据库","link":"#创建数据库","children":[]},{"level":3,"title":"启动 zabbix","slug":"启动-zabbix","link":"#启动-zabbix","children":[]}]},{"level":2,"title":"安装 Zabbix Agent","slug":"安装-zabbix-agent","link":"#安装-zabbix-agent","children":[{"level":3,"title":"安装 zabbix agent","slug":"安装-zabbix-agent-1","link":"#安装-zabbix-agent-1","children":[]}]},{"level":2,"title":"Docker 部署","slug":"docker-部署","link":"#docker-部署","children":[{"level":3,"title":"docker-compose.yaml","slug":"docker-compose-yaml","link":"#docker-compose-yaml","children":[]},{"level":3,"title":"部署","slug":"部署","link":"#部署","children":[]}]}],"git":{"updatedTime":1735864947000,"contributors":[{"name":"hyfly233","username":"hyfly233","email":"hyfly233@outlook.com","commits":6,"url":"https://github.com/hyfly233"}]},"filePathRelative":"md/article/monitor/zabbix/zabbix安装.md"}');export{o as comp,d as data};
