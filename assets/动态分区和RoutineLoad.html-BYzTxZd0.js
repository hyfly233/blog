import{_ as n,c as a,f as l,o as e}from"./app-chPKMbRn.js";const p={};function o(i,s){return e(),a("div",null,s[0]||(s[0]=[l(`<h2 id="建表语句" tabindex="-1"><a class="header-anchor" href="#建表语句"><span>建表语句</span></a></h2><p>添加 create_history_partition、history_partition_num 属性，将会创建历史分区</p><div class="language-sql line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-sql;"><code><span class="line"><span class="line"><span style="color:#81A1C1;">//</span><span style="color:#D8DEE9FF;"> 建表</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#81A1C1;"> TABLE</span><span style="color:#88C0D0;"> testdb</span><span style="color:#D8DEE9FF;">.test_table_1</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">(</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">    begin_time </span><span style="color:#81A1C1;">DATETIME</span><span style="color:#D8DEE9FF;"> ,</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">    k1 </span><span style="color:#81A1C1;">TINYINT</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">    k2 </span><span style="color:#81A1C1;">DECIMAL</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">, </span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">DEFAULT</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">10.5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">    k3 </span><span style="color:#81A1C1;">VARCHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) COMMENT </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">string column</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">    k4 </span><span style="color:#81A1C1;">INT</span><span style="color:#81A1C1;"> NOT NULL</span><span style="color:#81A1C1;"> DEFAULT</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> COMMENT </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">int column</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">)</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">DUPLICATE </span><span style="color:#81A1C1;">KEY</span><span style="color:#D8DEE9FF;">( begin_time, k1, k2 )</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">PARTITION</span><span style="color:#81A1C1;"> BY</span><span style="color:#81A1C1;"> RANGE</span><span style="color:#D8DEE9FF;">( begin_time ) </span><span style="color:#ECEFF4;">()</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">DISTRIBUTED</span><span style="color:#81A1C1;"> BY</span><span style="color:#81A1C1;"> HASH</span><span style="color:#D8DEE9FF;">( begin_time ) BUCKETS </span><span style="color:#B48EAD;">3</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">PROPERTIES (</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">replication_num</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">3</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">true</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.time_unit</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">DAY</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.create_history_partition</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">true</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.history_partition_num</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 7</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.start</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">-7</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.end</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">3</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.prefix</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">p</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">dynamic_partition.buckets</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">10</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查看分区情况" tabindex="-1"><a class="header-anchor" href="#查看分区情况"><span>查看分区情况</span></a></h2><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#88C0D0;">./mysql</span><span style="color:#A3BE8C;"> -uroot</span><span style="color:#A3BE8C;"> -P9030</span><span style="color:#A3BE8C;"> -h127.0.0.1</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">SHOW</span><span style="color:#A3BE8C;"> PARTITIONS</span><span style="color:#A3BE8C;"> FROM</span><span style="color:#A3BE8C;"> testdb.test_table_1</span><span style="color:#81A1C1;">;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="建立routine-load" tabindex="-1"><a class="header-anchor" href="#建立routine-load"><span>建立Routine Load</span></a></h2><div class="language-sql line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-sql;"><code><span class="line"><span class="line"><span style="color:#81A1C1;">//</span><span style="color:#D8DEE9FF;"> Routine </span><span style="color:#81A1C1;">Load</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> ROUTINE </span><span style="color:#81A1C1;">LOAD</span><span style="color:#D8DEE9FF;"> testdb.test_table_1_routine_load </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> testdb.test_table_1</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">COLUMNS(begin_time, k1, k2, k3, k4)</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">PROPERTIES(</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">desired_concurrent_number</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">3</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">format</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">strict_mode</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">false</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">)</span></span></span>
<span class="line"><span class="line"><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> KAFKA(</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">kafka_broker_list</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">127.0.0.1:9092</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">kafka_topic</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">doris-test-table-1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">property.group.id</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">b-doris-test-table-1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">,</span></span></span>
<span class="line"><span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">property.kafka_default_offsets</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">OFFSET_BEGINNING</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">);</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7)]))}const c=n(p,[["render",o],["__file","动态分区和RoutineLoad.html.vue"]]),r=JSON.parse('{"path":"/md/article/database/doris/%E5%8A%A8%E6%80%81%E5%88%86%E5%8C%BA%E5%92%8CRoutineLoad.html","title":"动态分区和RoutineLoad","lang":"en-US","frontmatter":{"title":"动态分区和RoutineLoad","sidebar":"heading"},"headers":[{"level":2,"title":"建表语句","slug":"建表语句","link":"#建表语句","children":[]},{"level":2,"title":"查看分区情况","slug":"查看分区情况","link":"#查看分区情况","children":[]},{"level":2,"title":"建立Routine Load","slug":"建立routine-load","link":"#建立routine-load","children":[]}],"git":{"updatedTime":1735803006000,"contributors":[{"name":"hyfly233","username":"hyfly233","email":"hyfly233@outlook.com","commits":2,"url":"https://github.com/hyfly233"}]},"filePathRelative":"md/article/database/doris/动态分区和RoutineLoad.md"}');export{c as comp,r as data};
