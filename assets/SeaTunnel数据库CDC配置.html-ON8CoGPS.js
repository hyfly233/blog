import{_ as n,c as a,f as l,o as e}from"./app-chPKMbRn.js";const p={};function i(o,s){return e(),a("div",null,s[0]||(s[0]=[l(`<h1 id="seatunnel数据库cdc配置" tabindex="-1"><a class="header-anchor" href="#seatunnel数据库cdc配置"><span>SeaTunnel数据库CDC配置</span></a></h1><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql"><span>MySql</span></a></h2><p>需要开启 binlog，修改数据库 /etc/my.cnf</p><div class="language-yaml line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-yaml;"><code><span class="line"><span class="line"><span style="color:#A3BE8C;">server_id=100</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">log-bin=mysql-bin</span></span></span>
<span class="line"><span class="line"><span style="color:#A3BE8C;">binlog-format=ROW</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在数据库中执行以下命令检查</p><div class="language-sql line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-sql;"><code><span class="line"><span class="line"><span style="color:#D8DEE9FF;">show variables </span><span style="color:#81A1C1;">like</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">%binlog_format%</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">show variables </span><span style="color:#81A1C1;">like</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">%binlog_row_image%</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://developer.aliyun.com/article/869534" target="_blank" rel="noopener noreferrer">https://developer.aliyun.com/article/869534</a> 从该文章描述得到的结论</p><ul><li>基于查询和binlog的方案都有一定的劣势，在全量数据下，一致性方面都会有所欠缺</li><li>FlinkCDC 基于Snapshot+binlog的方案结合了两者的特点，可以保证同步数据的一致性 <ul><li>原生的基于锁的全量数据获取具有一定的性能问题</li><li>基于DBLog的无锁方案在性能和一致性上可以兼得。是比较理想的方案</li></ul></li></ul><h2 id="pg" tabindex="-1"><a class="header-anchor" href="#pg"><span>pg</span></a></h2><h3 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h3><p><a href="https://blog.csdn.net/xiweiller/article/details/126030209" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/xiweiller/article/details/126030209</a><a href="https://seatunnel.apache.org/docs/2.3.4/connector-v2/source/Postgre-CDC/" target="_blank" rel="noopener noreferrer">https://seatunnel.apache.org/docs/2.3.4/connector-v2/source/Postgre-CDC/</a></p><h2 id="seatunnel-cdc" tabindex="-1"><a class="header-anchor" href="#seatunnel-cdc"><span>SeaTunnel CDC</span></a></h2><h3 id="mysql-cdc-到-kafka" tabindex="-1"><a class="header-anchor" href="#mysql-cdc-到-kafka"><span>MySQL CDC 到 kafka</span></a></h3><div class="language-bash line-numbers-mode line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="shiki nord vp-code" style="background-color:#2e3440ff;color:#d8dee9ff language-bash;"><code><span class="line"><span class="line"><span style="color:#88C0D0;">env</span><span style="color:#A3BE8C;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  execution.parallelism</span><span style="color:#A3BE8C;"> =</span><span style="color:#B48EAD;"> 1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  job.mode</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">STREAMING</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  checkpoint.interval</span><span style="color:#A3BE8C;"> =</span><span style="color:#B48EAD;"> 10000</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">}</span></span></span>
<span class="line"><span class="line"></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">source</span><span style="color:#A3BE8C;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  MySQL-CDC</span><span style="color:#A3BE8C;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    result_table_name</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">test</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  	hostname</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">192.168.0.1</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    username</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">root</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    password</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">biitt@123</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    parallelism</span><span style="color:#A3BE8C;"> =</span><span style="color:#B48EAD;"> 1</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  	server-id</span><span style="color:#A3BE8C;"> =</span><span style="color:#B48EAD;"> 100</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  	server-time-zone</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Asia/Hong_Kong</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  	database-names</span><span style="color:#A3BE8C;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">test </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  	table-names</span><span style="color:#A3BE8C;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">test</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  	base-url</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">jdbc:mysql://192.168.0.1:3306/test</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    debezium</span><span style="color:#A3BE8C;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">      snapshot.mode</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">always</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">      decimal.handling.mode</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">double</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">    }</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">  }</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">}</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;"> </span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">sink</span><span style="color:#A3BE8C;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">  kafka</span><span style="color:#A3BE8C;"> {</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    format</span><span style="color:#A3BE8C;"> =</span><span style="color:#A3BE8C;"> JSON</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    semantics</span><span style="color:#A3BE8C;"> =</span><span style="color:#A3BE8C;"> NON</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    source_table_name</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">test</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    topic</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">test</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#88C0D0;">    bootstrap.servers</span><span style="color:#A3BE8C;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">192.168.0.1:9092</span><span style="color:#ECEFF4;">&quot;</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">  }</span></span></span>
<span class="line"><span class="line"><span style="color:#D8DEE9FF;">}</span></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14)]))}const r=n(p,[["render",i],["__file","SeaTunnel数据库CDC配置.html.vue"]]),t=JSON.parse('{"path":"/md/article/middleware/seatunnel/SeaTunnel%E6%95%B0%E6%8D%AE%E5%BA%93CDC%E9%85%8D%E7%BD%AE.html","title":"SeaTunnel数据库CDC配置","lang":"en-US","frontmatter":{"title":"SeaTunnel数据库CDC配置","sidebar":"heading"},"headers":[{"level":2,"title":"MySql","slug":"mysql","link":"#mysql","children":[]},{"level":2,"title":"pg","slug":"pg","link":"#pg","children":[{"level":3,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}]},{"level":2,"title":"SeaTunnel CDC","slug":"seatunnel-cdc","link":"#seatunnel-cdc","children":[{"level":3,"title":"MySQL CDC 到 kafka","slug":"mysql-cdc-到-kafka","link":"#mysql-cdc-到-kafka","children":[]}]}],"git":{"updatedTime":1736074146000,"contributors":[{"name":"hyfly233","username":"hyfly233","email":"hyfly233@outlook.com","commits":1,"url":"https://github.com/hyfly233"}]},"filePathRelative":"md/article/middleware/seatunnel/SeaTunnel数据库CDC配置.md"}');export{r as comp,t as data};
