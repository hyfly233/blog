# Hystrix

## 服务雪崩

+ 多个微服务之间调用的时候，假设微服务A调用微服务B和微服务C，微服务B和微服务C又调用其他的微服务，这就是所谓的“扇出”，如果扇出的链路上某个微服务的调用响应时间过长，或者不可用，对微服务A的调用就会占用越来越多的系统资源，进而引起系统崩溃，所谓的“雪崩效应”
  - 比如一台服务器上的众多微服务中有一个微服务叫A，如果A崩溃了，不能提供服务了，那么所有请求这个微服务的用户就会一直等待，等待地人越来越多，那么占用的服务器的系统资源就越多[因为服务器需要维持用户的请求队列，先进先出]，最终将会导致资源被占完，这个服务器就会拒绝服务，那么这个服务器上的其他服务也就访问不了了，这就是雪崩效应
+ 对于高流量的应用来说，单一的后端依赖可能会导致所有服务器上的所有资源都在几十秒内饱和。比失败更糟糕的是，这些应用程序还可能导致服务之间的延迟增加，备份队列，线程和其他系统资源紧张，导致整个系统发生更多的级联故障，这些都表示需要对故障和延迟进行隔离和管理，以便单个依赖关系的失败，不能取消整个应用程序或系统
+ 我们需要，弃车保帅
  - 最简单的做法就是做服务备份，注意：服务备份大多数情况下不是指将这个服务再拷贝一份，更多的时候是指当这个服务崩溃之后，系统自动切换服务备份顶上，服务备份一般不会提供服务，而是向客户端返回一些提示信息，提示当前的这个服务崩溃了，而不是让用户等待，一直占用服务器的资源；当然备份也可以是将当前这个服务拷贝一份，当这个服务奔溃的时候切换它继续提供正常的服务，但是这样成本就增加了，因为按照这种备份，原来的服务器资源需要翻倍