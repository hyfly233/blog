# 优化方案



## 云端部署





## 配置优化

### Tomcat配置优化

+ 最小线程数
+ 最大线程数
+ 线程等待队列
+ 连接数
+ keepAlive优化



## 分布式扩展

### Nginx负载均衡反向代理

openresty



Nginx静态资源部署

Nginx动态请求反向代理



### Java服务分布式

部署脚本

启动脚本



### 分布式会话

cookie

session

token





## 查询优化

### Redis缓存

缓存脏读处理

反击穿

### 本地缓存

guava cache

缓存清理

### 热点缓存

如何判断热

如何保持热

如何淘汰非热



### OpenResty

lua



### 静态资源CDN

刷新方式



### 全页面静态化 PhantomJS

爬虫

初始化标记

CDN部署



## 流量削峰

### 秒杀令牌

权限模块

令牌频次控制

### 秒杀大闸

库存联动

### 队列泄洪



## 交易优化（商城秒杀）

### 高效验证

缓存

索引

### 缓存库存

原子操作

一致性

### 库存售罄防击穿

缓存令牌

### 交易异步化

异步

轮询

### RocketMQ事务型消息

生产者

消费者

消息反查

## 防刷限流

### 验证码

### 令牌桶限流

ratelimiter

### 防黄牛防刷

设备指纹





























