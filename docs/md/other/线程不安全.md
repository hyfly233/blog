# 变量的线程安全问题



## 成员变量和静态变量

+ 没有共享，线程安全
+ 被共享，分两种情况：
  + 只读，线程安全
  + 有写操作，该变量是临界区，则需要考虑线程安全



## 局部变量

+ 局部变量本身是线程安全的

+ 局部变量引用的对象不一定是线程安全的

  + 如果该引用的对象只存在于该函数的作用域中，则是线程安全

    ```java
    public static void test1() {
        int i = 10;
        i++;
    }
    ```

    

  + 如果使用`return 语句`返回该引用对象，则需要考虑线程安全问题



## 常见线程安全类

+ String
+ StringBuffer
+ 原子类
+ Random
+ Vector
+ Hashtable
+ java.util.concurrent



1. 线程安全类的每个方法是原子的
2. 但多个原子方法组合调用时不是原子的，不能保证线程安全